<!-- Use a button to open the snackbar -->
<button onclick="saveProfile()">変更を保存</button><br>

<!-- The actual snackbar -->
<div id="snackbar">Some text some message..</div>

<img src="person_placeholder.png" id="placeholder" height=20% width=auto ><br>
氏名<input id="input_0"><br>
ニックネーム<input id="input_1"><br>
メールアドレス<input id="input_2"><br>
*氏名とメールアドレスは公開されません

<style>
/* The snackbar - position it at the bottom and in the middle of the screen */
#snackbar {
  visibility: hidden; /* Hidden by default. Visible on click */
  min-width: 250px; /* Set a default minimum width */
  margin-left: -125px; /* Divide value of min-width by 2 */
  background-color: #333; /* Black background color */
  color: #fff; /* White text color */
  text-align: center; /* Centered text */
  border-radius: 2px; /* Rounded borders */
  padding: 16px; /* Padding */
  position: fixed; /* Sit on top of the screen */
  z-index: 1; /* Add a z-index if needed */
  left: 50%; /* Center the snackbar */
  bottom: 30px; /* 30px from the bottom */
}

/* Show the snackbar when clicking on a button (class added with JavaScript) */
#snackbar.show {
  visibility: visible; /* Show the snackbar */
  /* Add animation: Take 0.5 seconds to fade in and out the snackbar.
  However, delay the fade out process for 2.5 seconds */
  -webkit-animation: fadein 0.5s, fadeout 0.5s 4.5s;
  animation: fadein 0.5s, fadeout 0.5s 4.5s;
}

/* Animations to fade the snackbar in and out */
@-webkit-keyframes fadein {
  from {bottom: 0; opacity: 0;}
  to {bottom: 30px; opacity: 1;}
}

@keyframes fadein {
  from {bottom: 0; opacity: 0;}
  to {bottom: 30px; opacity: 1;}
}

@-webkit-keyframes fadeout {
  from {bottom: 30px; opacity: 1;}
  to {bottom: 0; opacity: 0;}
}

@keyframes fadeout {
  from {bottom: 30px; opacity: 1;}
  to {bottom: 0; opacity: 0;}
}
</style>

<script>
//-------------------
//mail check function
//-------------------
function MailCheck( mail ) {
    var mail_regex1 = new RegExp( '(?:[-!#-\'*+/-9=?A-Z^-~]+\.?(?:\.[-!#-\'*+/-9=?A-Z^-~]+)*|"(?:[!#-\[\]-~]|\\\\[\x09 -~])*")@[-!#-\'*+/-9=?A-Z^-~]+(?:\.[-!#-\'*+/-9=?A-Z^-~]+)*' );
    var mail_regex2 = new RegExp( '^[^\@]+\@[^\@]+$' );
    if( mail.match( mail_regex1 ) && mail.match( mail_regex2 ) ) {
        // 全角チェック
        if( mail.match( /[^a-zA-Z0-9\!\"\#\$\%\&\'\(\)\=\~\|\-\^\\\@\[\;\:\]\,\.\/\\\<\>\?\_\`\{\+\*\} ]/ ) ) { return false; }
        // 末尾TLDチェック（〜.co,jpなどの末尾ミスチェック用）
        if( !mail.match( /\.[a-z]+$/ ) ) { return false; }
        return true;
    } else {
        return false;
    }
}
//参考にさせていただきました
//https://kantaro-cgi.com/blog/javascript/javascript_mailaddress_check.html
//-------------------




toastbar("まずは幹事プロフィールを充実させよう！")

//DOM shorcuts
function toastbar(message){
  var snackbarElement=document.getElementById("snackbar")
  snackbarElement.innerHTML=message
  var x = document.getElementById("snackbar");
  // Add the "show" class to DIV
  x.className = "show";
  // After 3 seconds, remove the show class from DIV
  setTimeout(function(){ x.className = x.className.replace("show", ""); }, 5000);
}
//toastbar reference
//https://www.w3schools.com/howto/howto_js_snackbar.asp

function updatingForms(){
  //firestore uid.....
}


function saveProfile(){
  if(isProfileValid()){
    
    //creating arrays
    
    console.log({name:document.getElementById("input_0").value,
    nickname:document.getElementById("input_1").value,
    mail:document.getElementById("input_2").value})
    
    //firebase-
    
    //firebase--
    toastbar("幹事プロフィールが正常に保存されました")
  }
}

function updatePlaceholder(picURL){
  document.getElementById("placeholder").src=picURL
}



function isProfileValid() {
  // Get the snackbar DIV
  var requirements=[false,false,false];
  
  var i;
  for(i=0;i<3;i++){
    var values=document.getElementById('input_'+i).value
    if(values==""){
      toastbar("空白の入力欄があります。確認してね！")
    }else{

      if(i==0){
        //name
        requirements[0]=true;
        
      }else if(i==1){
        //nickname
        requirements[i]=true
      }else if(i==2){
        //mail
        if(MailCheck(values)){
          requirements[i]=true
        }else{
          toastbar("メールアドレスが有効ではありません。確認してね！")
          
        }
        
      }
    }

  }
  
  if(requirements[0]&&requirements[1]&&requirements[2]){
    return true;
  }else{return false}

}
</script>

